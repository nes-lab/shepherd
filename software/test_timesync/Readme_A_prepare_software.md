# Prepare Software

## Prepare Host

The Host PC will

- control the devices via the ssh-sessions
- record the sync-performance with a logic analyzer connected to each sheep ([Saleae Software](https://www.saleae.com/downloads/))
- stress-test sheep and network with workloads (iperf3 is needed, available via apt)

## Prepare nodes

This involves

- choosing and installing linux-image
- configure PTP & phc2sys
- cleaning up the system to reduce interrupts
- activating the kernel-module to trigger the gpio

Tests require 2 to 3 embedded systems running linux

- advantage of 3: one node can be ptp-server, the others are clients
- the server can have a sync-offset on hardware-level

Devices are connected to a dhcp network (network under test)

### BeagleBone Black

Follow the [shepherd installation guide](https://orgua.github.io/shepherd/user/getting_started.html)
Timing-Output is generated by PRU by default and needs modification of KernelModule-Code.

### BeagleBone AI64

Steps are described in [AI64-Eval-Document](https://github.com/orgua/shepherd_v2_planning/blob/main/66_beaglebone_ai64_eval.md)

### Raspberry CM4

Steps are described in [CM4-Eval-Document](https://github.com/orgua/shepherd_v2_planning/blob/main/67_raspberry_CM4_eval.md)

### Kernel-Module Modification

There are two specialized branches to GPIO-Access on Kernel-Level

- [Kernel510](https://github.com/orgua/shepherd/tree/Kernel510/software/kernel-module/src): allows direct gpio-access for BBone Black & AI64
- [Kernel61RPi](https://github.com/orgua/shepherd/tree/Kernel61RPi/software/kernel-module/src): same for Raspberry PI CM4

â‡¾ compile and install these
